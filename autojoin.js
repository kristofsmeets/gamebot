function join(){var e=API.getWaitList().length;var t=API.getTimeRemaining();var n=API.getWaitListPosition(user);if(n>-1||API.getBoothPosition(user)>-1){API.chatLog("You are currently in the queue, the bot will add you back into the queue if you leave it",false);cancelDetect();return}if(e<50){API.djJoin();add1=setTimeout(function(){if(API.getWaitListPosition(user)>-1){API.chatLog("Queue had a space free, you were added",false);cancelDetect();return}},1e3)}API.on(API.WAIT_LIST_UPDATE,singleShotJoin);console.log("join in progress1");add2=setTimeout(function(){if(API.getTimeRemaining()<3){console.log("join in progress2");add3=setInterval(function(){console.log("join in progress3");API.djJoin();t=API.getTimeRemaining();n=API.getWaitListPosition(user);if(n>-1||t>3){add4=setTimeout(function(){if(n>-1){API.chatLog("Join method 2 successful",false);cancelDetect();return}else if(t>3){console.log("Join method 2 failed, attempting again");cancelFailed();return}},1e3)}},40)}else{console.log("song was skipped, trying again");failed()}},t*1e3-1500)}function failed(){setTimeout(function(){join()},5e3)}function CommandCalled(e){if(e=="/joinqueue"){API.chatLog("You will now be added to the queue automaticly whenever you are not in it",false);join()}if(e=="/canceljoin"){API.chatLog("You will no longer be automaticly added to the queue by this bot",false);cancel()}}function cancelDetect(){API.off(API.WAIT_LIST_UPDATE,singleShotJoin);API.off(API.DJ_ADVANCE,djChange);clearInterval(add1);clearInterval(add2);clearInterval(add3);clearInterval(add4);detect()}function cancelFailed(){API.off(API.WAIT_LIST_UPDATE,singleShotJoin);API.off(API.DJ_ADVANCE,djChange);clearInterval(add1);clearInterval(add2);clearInterval(add3);clearInterval(add4);failed()}function detect(){API.on(API.DJ_ADVANCE,djChange)}function singleShotJoin(){console.log("singleshot running");waitingCount=API.getWaitList().length;if(waitingCount<50){API.djJoin()}setTimeout(function(){if(API.getWaitListPosition(user)>-1){cancel();API.chatLog("Join method 1 successful",false);detect()}},5e3)}function djChange(){var e=API.getBoothPosition(user);var t=API.getWaitListPosition(user);if(e==-1&&t==-1){setTimeout(function(){console.log("detected not in queue, will now run join()");join()},5e3)}}var add1,add2,add3,add4;var user=API.getUser().id;API.on(API.CHAT_COMMAND,CommandCalled)
